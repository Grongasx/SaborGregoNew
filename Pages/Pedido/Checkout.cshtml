@page
@model SaborGregoNew.Pages.Pedido.CadastroPedidoModel
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

@{ 
    ViewData["Title"] = "Finalizar Compra";
}

<div class="text-center">
    <h1 class="display-4">Finalizar Compra</h1>
    <p>Revise seu pedido e finalize sua compra.</p>
</div>

<div id="checkout-summary">
</div>

@section Scripts {
    <script>
        const cart = JSON.parse(localStorage.getItem('cart') || '[]');
        const checkoutSummary = document.getElementById('checkout-summary');

        if (cart.length === 0) {
            checkoutSummary.innerHTML = '<p>Seu carrinho est√° vazio.</p>';
        } else {
            let summaryHtml = '<ul class="list-group">';
            let total = 0;

            cart.forEach(item => {
                summaryHtml += `<li class="list-group-item">${item.name} - ${item.quantity} x R$ ${item.price.toFixed(2)}</li>`;
                total += item.price * item.quantity;
            });

            summaryHtml += '</ul>';
            summaryHtml += `<hr /><p>Total: R$ ${total.toFixed(2)}</p>`;
            summaryHtml += '<a href="/Pedido/Confirmacao" class="btn btn-primary">Confirmar Pedido</a>';

            checkoutSummary.innerHTML = summaryHtml;
        }
    </script>
}
